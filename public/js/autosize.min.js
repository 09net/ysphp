!function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.autosize=t()}(this,function(){function e(e){function t(){var t=window.getComputedStyle(e,null);"vertical"===t.resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),e.style.wordWrap="break-word";var i=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=i,n="none"!==t.maxHeight?parseFloat(t.maxHeight):!1,r="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),o()}function o(){var t=e.style.height,o=document.documentElement.scrollTop,i=document.body.scrollTop;e.style.height="auto";var s=e.scrollHeight+r;if(n!==!1&&s>n?(s=n,"scroll"!==e.style.overflowY&&(e.style.overflowY="scroll")):"hidden"!==e.style.overflowY&&(e.style.overflowY="hidden"),e.style.height=s+"px",document.documentElement.scrollTop=o,document.body.scrollTop=i,t!==e.style.height){var d=document.createEvent("Event");d.initEvent("autosize.resized",!0,!1),e.dispatchEvent(d)}}if(e&&e.nodeName&&"TEXTAREA"===e.nodeName&&!e.hasAttribute("data-autosize-on")){var n,r;"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",o),window.addEventListener("resize",o),e.addEventListener("input",o),e.addEventListener("autosize.update",o),e.addEventListener("autosize.destroy",function(t){window.removeEventListener("resize",o),e.removeEventListener("input",o),e.removeEventListener("keyup",o),e.removeEventListener("autosize.destroy"),Object.keys(t).forEach(function(o){e.style[o]=t[o]}),e.removeAttribute("data-autosize-on")}.bind(e,{height:e.style.height,overflow:e.style.overflow,overflowY:e.style.overflowY,wordWrap:e.style.wordWrap,resize:e.style.resize})),e.setAttribute("data-autosize-on",!0),e.style.overflow="hidden",e.style.overflowY="hidden",t()}}return"function"!=typeof window.getComputedStyle?function(e){return e}:function(t){return t&&t.length?Array.prototype.forEach.call(t,e):t&&t.nodeName&&e(t),t}});
function jiami(id){mui.post('/cdn/yhjh/jiami',{q:document.getElementById(id).value},function(data){document.getElementById(id).value=data['q'];},'json');}
function jiemi(id){mui.post('/cdn/yhjh/jiemi',{q:document.getElementById(id).value},function(data){document.getElementById(id).value=data['q'];},'json');}
function dwhs(id){mui.post('/sl/chang',{size:hssize,num:document.getElementById('num').value,from:document.getElementById('from').value,to:document.getElementById('to').value},function(data){document.getElementById(id).value=data['q'];},'json');}
function get_text(id,slib){var from=document.getElementById('from').value;var to=document.getElementById('to').value;if(from==to){document.getElementById(id).value=document.getElementById('num').value;return true;}mui.post('/sl/'+slib,{size:hssize,num:document.getElementById('num').value,from:document.getElementById('from').value,to:document.getElementById('to').value},function(data){
																																																																																															 autoset(document.getElementById(id),data['q']);
																																																																																															
																																																																																															 
																																																																																															 },'json');}

function autoset(obj,q){
	objtagname=obj.tagName.toLocaleLowerCase();
 if(objtagname=='textarea' || objtagname=='input'){
   obj.value=q;
}else{
	obj.innerHTML=q;
	}
}


function oneid(slib,size,id){
$.ajax({url: '/cdn/'+slib+'/'+size,type:'post',cache: false,data:{q:document.getElementById(id).value},dataType: 'json'}).then(function(data) {
 autoset(document.getElementById(id),data['q']);
},function() {});

}
function aifrom_sub(slib,to){
	$.ajax({url: '/sl/'+slib,type:'post',cache: false,data:$('#aifrom').serialize(),dataType: 'json'}).then(function(data) {
 autoset(document.getElementById(to),data['q']);
},function() {});
	}
function aifrom_sub_mode(slib,to,mode){
	$.ajax({url: '/sl/'+slib+'?mode='+mode,type:'post',cache: false,data:$('#aifrom').serialize(),dataType: 'json'}).then(function(data) {
 autoset(document.getElementById(to),data['q']);
},function() {});
	}
function onesid(slib,size,from,to){
$.ajax({url: '/sl/'+slib,type:'post',cache: false,data:{mode:size,q:document.getElementById(from).value},dataType: 'json'}).then(function(data) {
 autoset(document.getElementById(to),data['q']);
},function() {});

}


function load_sel(sel,selName,num,nownum,url,remove){
if(remove){$("#"+selName+" option").each(function(){
$(this).remove();});}
$("<option value=0>---</option>").appendTo($("#"+selName));
var val = nownum ? nownum :$("#"+sel).val();
var geturl = url ? url :'/qytree';
$.getJSON(geturl,{pid:val},function(data){ 
if(data){
$.each(data,function(idx,item){
if(item.val==num){
$("<option value="+item.val+" selected=\"selected\">"+item.name+"</option>").appendTo($("#"+selName));
}else{
$("<option value="+item.val+">"+item.name+"</option>").appendTo($("#"+selName));
} 
});
}else{
$("<option value='0'>--</option>").appendTo($("#"+selName));
}
});
}

function th(py2,size){
var th=[
		['ā','a',1],['á','a',2],['ǎ','a',3],['à','a',4],
		['ē','e',1],['é','e',2],['ě','e',3],['è','e',4],
		['ī','i',1],['í','i',2],['ǐ','i',3],['ì','i',4],
		['ō','o',1],['ó','o',2],['ǒ','o',3],['ò','o',4],
		['ū','u',1],['ú','u',2],['ǔ','u',3],['ù','u',4],
		['ǖ','v',1],['ǘ','v',2],['ǚ','v',3],['ü','v',4],
		
		
		]

	for (var j=0;j<th.length;j++){
py=py2.replace(th[j][0],th[j][1]);
if(py!=py2){
if(size!=1) py=py+th[j][2];
return py;} 
}
if(size!=1) return py2+5;

return py2;


	}

function cpinyin(){
	document.getElementById('pinyinb').innerText=th(myTrim(document.getElementById('pinyinb').innerText),1);
	}
function myTrim(x) {
    return x.replace(/^\s+|\s+$/gm,'');
}
function mp3play(span){
pyy=myTrim(span.innerText);
pyy=pyy.toLowerCase();
pyya=pyy.split(" ");
arr= [];
	for (var j=0;j<pyya.length;j++){
	if (typeof(pyya[j]) != "undefined"){arr[arr.length] ='https://zh.180zhi.com/dict/' + th(pyya[j],0) + '.mp3';

	}
	
	
}
var myAudio = new Audio(); 
myAudio.preload = true; 
myAudio.controls = true; 
myAudio.src = arr.shift();         //每次读数组最后一个元素 
myAudio.addEventListener('ended', playEndedHandler, false); 
myAudio.play(); 
document.getElementById("bgm").appendChild(myAudio); 
myAudio.loop = false;//禁止循环，否则无法触发ended事件 
function playEndedHandler(){ 
url=arr.shift()
if (typeof(url) == "undefined") {myAudio.removeEventListener('ended',playEndedHandler,false); return false;}
myAudio.src = url; 
myAudio.play(); 
!arr.length && myAudio.removeEventListener('ended',playEndedHandler,false);//只有一个元素时解除绑定 
} 




}

autosize(document.querySelectorAll('textarea'));
 $("#myfun").on("click","button",function(){
				$("#"+$("#myfun").data("id")).val($("#"+$("#myfun").data("id")).val()+$(this).text()+'()');
  });